# Global defaults for thermo-credit parameters.
# Region-specific overrides live in `config_jp.yml`, `config_eu.yml`, and `config_us.yml`.

T0: 1.0              # Global reference temperature (dimensionless). Regional configs can override.
k: 1.0               # Boltzmann-like scaling constant for translating energy to temperature.
loop_forgetting: 0.98  # Exponential forgetting factor for loop area / hysteresis (0.98 ~ 2-year memory).

# Internal energy detrending (U -> U_star). No-lookahead rolling mean by default.
U_detrend:
  enabled: true
  method: rolling   # rolling or ema
  window: 12        # quarters
  min_periods: 4

# V_C formula: use min of headroom components by default
V_C_formula: min_headroom   # legacy to skip
V_C_headroom_cols:
  - capital_headroom
  - lcr_headroom
  - nsfr_headroom
V_C_headroom_scales:
  - 1.0
  - 1.0
  - 1.0

# Entropy categories (MECE) â€“ align with allocation_q.csv columns
q_cols:
  - q_productive
  - q_housing
  - q_consumption
  - q_financial
  - q_government
entropy_per_category: true

# Optional: preferred series (env > config > default order)
series:
  money_scale:
    preferred:
      - id: JPNASSETS
        start: 1995-01-01
        title: BoJ Total Assets (as money proxy)
      - id: MYAGM2JPM189S
        title: Japan M2 (FRED mirror)
        start: 1990-01-01
  base_proxy:
    - id: JPNASSETS
      title: BoJ Total Assets
      start: 1990-01-01
  yield_proxy:
    - id: IRLTLT01JPM156N
      title: Long-term JGB yield (FRED)
      note: Primary JP long-term yield series
      start: 1995-01-01
    - id: DGS10
      title: US 10Y (placeholder)
      note: Fallback if JP yield unavailable
      start: 1990-01-01
  money_scale_eu:
    preferred:
      - id: ECBASSETS
        title: ECB Total Assets (consolidated)
        note: Euro area balance sheet proxy
        start: 1999-01-01
      - id: MABMM301EZM189S
        title: Euro Area M3 (Broad Money)
        note: Broad money scale alternative
        start: 1999-01-01
  base_proxy_eu:
    - id: ECBASSETS
      title: ECB Total Assets
      start: 1999-01-01
  yield_proxy_eu:
    - id: IRLTLT01EZM156N
      title: Euro Area Long-term Yield
      note: Primary Euro area long-term yield series
      start: 1999-01-01
    - id: DE10Y
      title: Germany 10Y Bund Yield (placeholder)
      note: Fallback if aggregated EA yield unavailable
      start: 1999-01-01
  money_scale_us:
    preferred:
      - id: WALCL
        title: Federal Reserve Total Assets
        note: Fed balance sheet proxy
        start: 1990-01-01
      - id: WM2NS
        title: US M2 (Not seasonally adjusted)
        note: Broad money alternative
        start: 1990-01-01
  base_proxy_us:
    - id: WALCL
      title: Federal Reserve Total Assets
      start: 1990-01-01
  yield_proxy_us:
    - id: DGS10
      title: US 10Y Treasury Yield
      note: Primary US long-term yield
      start: 1990-01-01
    - id: GS30
      title: US 30Y Treasury Yield (fallback)
      note: Fallback if 10Y missing
      start: 1990-01-01

  # Credit enrichment roles (placeholders; replace with real preferred series)
  asset_proxy:
    - id: JPNASSETS
      title: BoJ Total Assets (asset side proxy)
      note: Replace with bank loans to private sector if available
      start: 1995-01-01
  energy_proxy:
    - id: NY.GDP.MKTP.CN@2000-01-01
      title: Nominal GDP (energy component proxy)
  depth_proxy:
    - id: CRDQJPAPABIS
      title: Private non-financial sector credit (depth stock)
  turnover_proxy:
    - id: MYAGM2JPM189S
      title: Japan M2 (use as liquidity turnover proxy)

  # Region-specific credit enrichment overrides
  depth_proxy_eu:
    - id: CRDQEZAPABIS
      title: Euro Area private non-financial sector credit (depth stock)
      start: 1999-01-01
  turnover_proxy_eu:
    - id: ECBASSETS
      title: ECB Total Assets (liquidity/turnover proxy placeholder)
      start: 1999-01-01

  depth_proxy_us:
    - id: CRDQUSAPABIS
      title: US private non-financial sector credit (depth stock)
      start: 1990-01-01
  turnover_proxy_us:
    - id: WALCL
      title: Federal Reserve Total Assets (liquidity/turnover proxy placeholder)
      start: 1990-01-01

# Enrichment calibration (optional overrides)
enrichment:
  depth_scale: 4.0               # heuristic multiplier base; ignored if real depth series present
  turnover_min: 0.1              # lower clipping bound
  turnover_max: 10.0             # upper clipping bound
  turnover_clip_warn_threshold: 0.15  # warn when clipped rows fraction > this
  depth_fallback: 1000.0         # default depth stock when L_real lacks signal
  turnover_fallback: 1.0         # default turnover when ratios unavailable
  depth_toy: 1000.0              # toy regression guard columns (JP pipeline)
  turnover_toy: 1.0

external_coupling:
  enabled: true
  alpha: 0.0    # pressure coupling coefficient (regional overrides can set >0)
  delta: 0.0    # temperature coupling coefficient (keep 0 for now)
  frequency: MS # aggregate drivers to month-start for alignment with credit/reg tables
  pressure_components:
    - key: hy_oas
      id: BAMLH0A0HYM2EY
      transform: value
    - key: usjp_10y_spread
      id: DGS10
      id_b: IRLTLT01JPM156N
      transform: spread
    - key: usd_jpy_return
      id: DEXJPUS
      transform: log_return
  temperature_components:
    - key: vix
      id: VIXCLS
      transform: value
    # MOVE: ICE BofA MOVE Index
    # FRED API does not provide this series via the JSON endpoint we use, so
    # attempting to fetch it results in HTTP 400. Until we wire a local CSV
    # or alternate data source, keep it disabled to avoid breaking builds.
    # - key: move
    #   id: MOVE
    #   transform: value

# Default parameters for leverage heuristics and allocation weights
parameters:
  leverage_share:
    default: 0.4
    jp: 0.4
    eu: 0.4
    us: 0.4
  quarterly_allocations:
    jp:
      q_pay: 0.30
      q_firm: 0.30
      q_asset: 0.25
      q_reserve: 0.15
    eu:
      q_households: 0.30
      q_corporates: 0.35
      q_government: 0.20
      q_row: 0.15
    us:
      q_households: 0.30
      q_corporates: 0.35
      q_public: 0.20
      q_rest: 0.15
